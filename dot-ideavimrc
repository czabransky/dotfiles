" IDEA Vim
" https://github.com/JetBrains/ideavim

source ~/.vimrc

" Plugins
" open hyperlinks using gx
" https://github.com/JetBrains/ideavim/wiki/IdeaVim-Plugins
" =========================================================

set noerrorbells
set visualbell

Plug 'nerdtree'
" https://github.com/preservim/nerdtree
" https://github.com/preservim/nerdtree/blob/master/doc/NERDTree.txt
" https://raw.githubusercontent.com/wiki/JetBrains/ideavim/NERDTree-support.md

Plug 'vim-commentary'
" https://github.com/tpope/vim-commentary
" https://github.com/tpope/vim-commentary/blob/master/doc/commentary.txt
" Use gcc to comment out a line (takes a count), gc to comment out the target of a motion (for example, gcap to comment out a paragraph)

Plug 'vim-exchange'
" https://github.com/tommcdo/vim-exchange
" https://github.com/tommcdo/vim-exchange/blob/master/doc/exchange.txt
" Easy text exchange operator for Vim. Use cx+motion to select text.

Plug 'vim-highlightedyank'
" https://github.com/machakann/vim-highlightedyank
let g:highlightedyank_highlight_duration = 1000
let g:highlightedyank_highlight_in_visual = 1

Plug 'vim-surround'
" https://github.com/tpope/vim-surround
" https://github.com/tpope/vim-surround/blob/master/doc/surround.txt


" Installed Plugins
" ========================================================================
" The following Plugins must be installed in the IDEA Marketplace, and are
" activated using the set <Plug> command.
"
set quickscope
" https://github.com/unblevable/quick-scope
let g:qs_enable=1
let g:qs_max_chars=120
let g:qs_highlight_on_keys = ['f', 'F', 't', 'T']

set which-key
" https://github.com/TheBlob42/idea-which-key
let g:WhichKey_ShowVimActions = "false"
let g:WhichKey_ShowTypedSequence = "true"
let g:WhichKey_DefaultDelay = 0
let g:WhichKey_ProcessUnknownMappings = "false"
let g:WhichKey_KeyColor = "#88d8b0"
let g:WhichKey_KeyStyle = "none"
let g:WhichKey_PrefixColor = "keyword"

let g:WhichKeyDesc_project = "<leader>p Project"
let g:WhichKeyDesc_project_idea_reload = "<leader>pi Reload Idea VimRC"
let g:WhichKeyDesc_project_recent = "<leader>pr Recent Projects"
let g:WhichKeyDesc_project_maven_reimport = "<leader>pm Maven Reimport"

let g:WhichKeyDesc_window = "<leader>w Windows"
let g:WhichKeyDesc_window_toggle = "<leader>ww Hide/Show All [W]indows"
let g:WhichKeyDesc_window_distraction = "<leader>wd Toggle [D]istraction Free Mode"
let g:WhichKeyDesc_window_explorer = "<leader>we Focus Project [E]xplorer"
let g:WhichKeyDesc_window_terminal = "<leader>wt Focus [T]erminal"
let g:WhichKeyDesc_window_maven = "<leader>wm Focus [M]aven Tool Window"
let g:WhichKeyDesc_window_coverage = "<leader>wv Focus Co[v]erage Tool Window"
let g:WhichKeyDesc_window_focus_window_left = "<leader>wh Focus Window or Buffer to the Left"
let g:WhichKeyDesc_window_focus_window_right = "<leader>wl Focus Window or Buffer to the Right"
let g:WhichKeyDesc_window_split_vertical = "<leader>w| Vertical Split"
let g:WhichKeyDesc_window_split_horizontal = "<leader>w- Horizontal Split"

let g:WhichKeyDesc_files = "<leader>f Find Files"
let g:WhichKeyDesc_files_everywhere = "<leader>fe [F]ind [E]verywhere"
let g:WhichKeyDesc_files_files = "<leader>ff [F]ind [F]iles"
let g:WhichKeyDesc_files_recent = "<leader>fr [F]ind [R]ecent"
let g:WhichKeyDesc_files_path = "<leader>fp [F]ind in [P]ath"
let g:WhichKeyDesc_files_select_menu = "<leader>fs [S]elect In Menu"

let g:WhichKeyDesc_run = "<leader>r Run Configurations"
let g:WhichKeyDesc_run_edit_config = "<leader>re [E]dit / Set Active Configuration"
let g:WhichKeyDesc_run_run = "<leader>rr [R]un Active Configuration"
let g:WhichKeyDesc_run_active_config = "<leader>ra Run [A]ctive Configuration"
let g:WhichKeyDesc_run_choose_config = "<leader>rc [C]hoose and Run Configuration"
let g:WhichKeyDesc_run_scope = "<leader>rs Run Current [S]cope"
let g:WhichKeyDesc_run_coverage = "<leader>rv Co[v]erage"

let g:WhichKeyDesc_debug = "<leader>d Debug Configurations"
let g:WhichKeyDesc_debug_edit_config = "<leader>de [E]dit / Set Active Configuration"
let g:WhichKeyDesc_debug_debug = "<leader>dd [D]ebug Active Configuration"
let g:WhichKeyDesc_debug_active_config = "<leader>da Debug [A]ctive Configuration"
let g:WhichKeyDesc_debug_choose_config = "<leader>dc [C]hoose and Run Debug Configuration"
let g:WhichKeyDesc_debug_scope = "<leader>ds Debug Current [S]cope"
let g:WhichKeyDesc_debug_breakpoint = "<leader>dp Toggle Break[p]oint"

let g:WhichKeyDesc_edit = "<leader>e Edit Actions"
let g:WhichKeyDesc_edit_comment = "<leader>ec [C]omment Lines"
let g:WhichKeyDesc_edit_generate = "<leader>eg [G]enerate"
let g:WhichKeyDesc_edit_refactor_this = "<leader>er [R]efactor This Menu"
let g:WhichKeyDesc_edit_override = "<leader>eo [O]verride Methods"

"" Project Key Mappings
nmap <leader>pi :action IdeaVim.ReloadVimRc.reload<CR>
nmap <leader>pr :action ManageRecentProjects<CR>
nmap <leader>pm :action ActivateMavenToolWindow<CR>:action Maven.Reimport<CR>

"" Window Management Key Mappings
nmap <leader>ww :action HideAllWindows<CR>
nmap <leader>wd :action ToggleDistractionFreeMode<CR>
nmap <leader>we :NERDTreeToggle<CR>
nmap <leader>wt :action ActivateTerminalToolWindow<CR>
nmap <leader>wm :action ActivateMavenToolWindow<CR>
nmap <leader>wv :action ActivateCoverageToolWindow<CR>

"" Run / Debug Key Mappings
nmap <leader>re :action editRunConfigurations<CR>
nmap <leader>rr :action Run<CR>
nmap <leader>ra :action Run<CR>
nmap <leader>rc :action ChooseRunConfiguration<CR>
nmap <leader>rs :action RunClass<CR>
nmap <leader>rv :action Coverage<CR>
nmap <leader>de :action editRunConfigurations<CR>
nmap <leader>dd :action Debug<CR>
nmap <leader>da :action Debug<CR>
nmap <leader>dc :action ChooseDebugConfiguration<CR>
nmap <leader>ds :action DebugClass<CR>
nmap <leader>dp :action ToggleLineBreakpoint<CR>

"" File Navigation Key Mappings
nmap <leader>fe :action SearchEverywhere<CR>
nmap <leader>ff :action GotoFile<CR>
nmap <leader>fr :action RecentFiles<CR>
nmap <leader>fp :action FindInPath<CR>
nmap <leader>fs :action SelectIn<CR>
nmap <leader>e :action GotoNextError<CR>

"" Editing Key Mappings
nmap <leader>ec :action CommentByLineComment<CR>
vmap <leader>ec :action CommentByLineComment<CR>
nmap <leader>eg :action Generate<CR>
nmap <leader>er :action Refactorings.QuickListPopupAction<CR>
nmap <leader>eo :action OverrideMethods<CR>
nmap <CR> :aceion ReformatCode<CR> :write<CR>


" Git Actions mimic hotkeys from Fugitive
nmap <leader>gs :action CheckinProject<CR>
nmap <leader>gc :action CheckinProject<CR>
nmap <leader>ga :action Git.Add<CR>
nmap <leader>gp :action Git.Pull<CR>
nmap <leader>gn :action Annotate<CR>
nmap <leader>gl :action Git.Log<CR>
nmap <leader>go :action Github.Open.In.Browser<CR>
nmap <leader>br :action Git.Branches<CR>
nmap <leader>gb :action Git.Branches<CR>

